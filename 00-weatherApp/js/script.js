
let provinces=[
    {
        "id": 1,
        "name": "آذربایجان شرقی",
        "tel_prefix": "041",
        "cities": [
            "کشکسرای",
            "سهند",
            "سیس",
            "دوزدوزان",
            "تیمورلو",
            "صوفیان",
            "سردرود",
            "هادیشهر",
            "هشترود",
            "زرنق",
            "ترکمانچای",
            "ورزقان",
            "تسوج",
            "زنوز",
            "ایلخچی",
            "شرفخانه",
            "مهربان",
            "مبارک شهر",
            "تیکمه داش",
            "باسمنج",
            "سیه رود",
            "میانه",
            "خمارلو",
            "خواجه",
            "بناب مرند",
            "قره آغاج",
            "وایقان",
            "مراغه",
            "ممقان",
            "خامنه",
            "خسروشاه",
            "لیلان",
            "نظرکهریزی",
            "اهر",
            "بخشایش",
            "آقکند",
            "جوان قلعه",
            "کلیبر",
            "مرند",
            "اسکو",
            "شندآباد",
            "شربیان",
            "گوگان",
            "بستان آباد",
            "تبریز",
            "جلفا",
            "اچاچی",
            "هریس",
            "یامچی",
            "خاروانا",
            "کوزه کنان",
            "خداجو(خراجو)",
            "آذرشهر",
            "شبستر",
            "سراب",
            "ملکان",
            "بناب",
            "هوراند",
            "کلوانق",
            "ترک",
            "عجب شیر",
            "آبش احمد"
        ]
    },
    {
        "id": 2,
        "name": "آذربایجان غربی",
        "tel_prefix": "044",
        "cities": [
            "تازه شهر",
            "نالوس",
            "ایواوغلی",
            "شاهین دژ",
            "گردکشانه",
            "باروق",
            "سیلوانه",
            "بازرگان",
            "نازک علیا",
            "ربط",
            "تکاب",
            "دیزج دیز",
            "سیمینه",
            "نوشین",
            "میاندوآب",
            "مرگنلر",
            "سلماس",
            "آواجیق",
            "قطور",
            "محمودآباد",
            "خوی",
            "نقده",
            "سرو",
            "خلیفان",
            "پلدشت",
            "میرآباد",
            "اشنویه",
            "زرآباد",
            "بوکان",
            "پیرانشهر",
            "چهاربرج",
            "قوشچی",
            "شوط",
            "ماکو",
            "سیه چشمه",
            "سردشت",
            "کشاورز",
            "کشاورز",
            "محمدیار",
            "ارومیه",
            "مهاباد",
            "قره ضیاءالدین"
        ]
    },
    {
        "id": 3,
        "name": "اردبیل",
        "tel_prefix": "045",
        "cities": [
            "پارس آباد",
            "فخراباد",
            "کلور",
            "نیر",
            "اردبیل",
            "اسلام اباد",
            "تازه کندانگوت",
            "مشگین شهر",
            "جعفرآباد",
            "نمین",
            "اصلاندوز",
            "مرادلو",
            "خلخال",
            "کوراییم",
            "هیر",
            "گیوی",
            "گرمی",
            "لاهرود",
            "هشتجین",
            "عنبران",
            "تازه کند",
            "قصابه",
            "رضی",
            "سرعین",
            "بیله سوار",
            "آبی بیگلو"
        ]
    },
    {
        "id": 4,
        "name": "اصفهان",
        "tel_prefix": "031",
        "cities": [
            "گزبرخوار",
            "زیار",
            "زرین شهر",
            "گلشن",
            "پیربکران",
            "خالدآباد",
            "سجزی",
            "گوگد",
            "تیران",
            "ونک",
            "دهق",
            "زواره",
            "کاشان",
            "ابوزیدآباد",
            "اصغرآباد",
            "بافران",
            "شهرضا",
            "خور",
            "مجلسی",
            "هرند",
            "فولادشهر",
            "کمشچه",
            "کلیشادوسودرجان",
            "لای بید",
            "قهجاورستان",
            "چرمهین",
            "رزوه",
            "فریدونشهر",
            "طرق رود",
            "نصرآباد",
            "برزک",
            "سفیدشهر",
            "سمیرم",
            "گلدشت",
            "اردستان",
            "جوشقان قالی",
            "بویین ومیاندشت",
            "کرکوند",
            "درچه",
            "انارک",
            "دولت آباد",
            "ایمانشهر",
            "گرگاب",
            "حسن اباد",
            "سده لنجان",
            "حبیب آباد",
            "بهاران شهر",
            "میمه",
            "تودشک",
            "گلشهر",
            "رضوانشهر",
            "داران",
            "علویجه",
            "نیک آباد",
            "مشکات",
            "آران وبیدگل",
            "خوانسار",
            "نجف آباد",
            "منظریه",
            "فرخی",
            "دیزیچه",
            "اژیه",
            "زاینده رود",
            "خورزوق",
            "قهدریجان",
            "شاهین شهر",
            "بهارستان",
            "چمگردان",
            "دهاقان",
            "برف انبار",
            "بادرود",
            "کوهپایه",
            "گلپایگان",
            "عسگران",
            "حنا",
            "کهریزسنگ",
            "مهاباد",
            "کامو و چوگان",
            "افوس",
            "زیباشهر",
            "کوشک",
            "نایین",
            "سین",
            "زازران",
            "مبارکه",
            "ورزنه",
            "ورنامخواست",
            "شاپورآباد",
            "فلاورجان",
            "وزوان",
            "اصفهان",
            "باغ بهادران",
            "چادگان",
            "دامنه",
            "نطنز",
            "محمدآباد",
            "نیاسر",
            "نوش آباد",
            "کمه",
            "جوزدان",
            "قمصر",
            "جندق",
            "طالخونچه",
            "خمینی شهر",
            "باغشاد",
            "دستگرد",
            "ابریشم"
        ]
    },
    {
        "id": 5,
        "name": "البرز",
        "tel_prefix": "026",
        "cities": [
            "چهارباغ",
            "آسارا",
            "کرج",
            "طالقان",
            "شهرجدیدهشتگرد",
            "محمدشهر",
            "مشکین دشت",
            "نظرآباد",
            "هشتگرد",
            "ماهدشت",
            "اشتهارد",
            "کوهسار",
            "گرمدره",
            "تنکمان",
            "گلسار",
            "کمال شهر",
            "فردیس"
        ]
    },
    {
        "id": 6,
        "name": "ایلام",
        "tel_prefix": "084",
        "cities": [
            "آبدانان",
            "شباب",
            "موسیان",
            "بدره",
            "ایلام",
            "ایوان",
            "مهران",
            "آسمان آباد",
            "پهله",
            "مهر",
            "سراب باغ",
            "بلاوه",
            "میمه",
            "دره شهر",
            "ارکواز",
            "مورموری",
            "توحید",
            "دهلران",
            "لومار",
            "چوار",
            "زرنه",
            "صالح آباد",
            "سرابله",
            "ماژین",
            "دلگشا"
        ]
    },
    {
        "id": 7,
        "name": "بوشهر",
        "tel_prefix": "077",
        "cities": [
            "ریز",
            "برازجان",
            "بندرریگ",
            "اهرم",
            "دوراهک",
            "خورموج",
            "نخل تقی",
            "کلمه",
            "بندردیلم",
            "وحدتیه",
            "بنک",
            "چغادک",
            "بندردیر",
            "کاکی",
            "جم",
            "دالکی",
            "بندرگناوه",
            "آباد",
            "آبدان",
            "خارک",
            "شنبه",
            "بوشکان",
            "انارستان",
            "شبانکاره",
            "سیراف",
            "دلوار",
            "بردستان",
            "بادوله",
            "عسلویه",
            "تنگ ارم",
            "امام حسن",
            "سعد آباد",
            "بندرکنگان",
            "بوشهر",
            "بردخون",
            "آب پخش"
        ]
    },
    {
        "id": 8,
        "name": "تهران",
        "tel_prefix": "021",
        "cities": [
            "شاهدشهر",
            "پیشوا",
            "جوادآباد",
            "ارجمند",
            "ری",
            "نصیرشهر",
            "رودهن",
            "اندیشه",
            "نسیم شهر",
            "صباشهر",
            "ملارد",
            "شمشک",
            "پاکدشت",
            "باقرشهر",
            "احمد آباد مستوفی",
            "کیلان",
            "قرچک",
            "فردوسیه",
            "گلستان",
            "ورامین",
            "فیروزکوه",
            "فشم",
            "پرند",
            "آبعلی",
            "چهاردانگه",
            "تهران",
            "بومهن",
            "وحیدیه",
            "صفادشت",
            "لواسان",
            "فرون اباد",
            "کهریزک",
            "رباطکریم",
            "آبسرد",
            "باغستان",
            "صالحیه",
            "شهریار",
            "قدس",
            "تجریش",
            "شریف آباد",
            "حسن آباد",
            "اسلامشهر",
            "دماوند",
            "پردیس"
        ]
    },
    {
        "id": 9,
        "name": "چهار محال بختیاری",
        "tel_prefix": "038",
        "cities": [
            "وردنجان",
            "گوجان",
            "گهرو",
            "سورشجان",
            "سرخون",
            "شهرکرد",
            "منج",
            "بروجن",
            "پردنجان",
            "سامان",
            "فرخ شهر",
            "صمصامی",
            "طاقانک",
            "کاج",
            "نقنه",
            "لردگان",
            "باباحیدر",
            "دستنا",
            "سودجان",
            "بازفت",
            "هفشجان",
            "سردشت",
            "فرادبنه",
            "چلیچه",
            "بن",
            "فارسان",
            "شلمزار",
            "نافچ",
            "دشتک",
            "بلداجی",
            "آلونی",
            "گندمان",
            "جونقان",
            "ناغان",
            "هارونی",
            "چلگرد",
            "کیان",
            "اردل",
            "سفیددشت",
            "مال خلیفه"
        ]
    },
    {
        "id": 10,
        "name": "خراسان جنوبی",
        "tel_prefix": "056",
        "cities": [
            "اسلامیه",
            "شوسف",
            "قاین",
            "عشق آباد",
            "طبس مسینا",
            "ارسک",
            "آیسک",
            "نیمبلوک",
            "دیهوک",
            "سربیشه",
            "محمدشهر",
            "بیرجند",
            "فردوس",
            "نهبندان",
            "اسفدن",
            "گزیک",
            "حاجی آباد",
            "سه قلعه",
            "آرین شهر",
            "مود",
            "خوسف",
            "قهستان",
            "بشرویه",
            "سرایان",
            "خضری دشت بیاض",
            "طبس",
            "اسدیه",
            "زهان"
        ]
    },
    {
        "id": 11,
        "name": "خراسان رضوی",
        "tel_prefix": "051",
        "cities": [
            "بار",
            "نیل شهر",
            "جنگل",
            "درود",
            "رباط سنگ",
            "سلطان آباد",
            "فریمان",
            "گناباد",
            "کاریز",
            "همت آباد",
            "سلامی",
            "باجگیران",
            "بجستان",
            "چناران",
            "درگز",
            "کلات",
            "چکنه",
            "نصرآباد",
            "بردسکن",
            "مشهد",
            "کدکن",
            "نقاب",
            "قلندرآباد",
            "کاشمر",
            "شاندیز",
            "نشتیفان",
            "ششتمد",
            "شادمهر",
            "عشق آباد",
            "چاپشلو",
            "رشتخوار",
            "قدمگاه",
            "صالح آباد",
            "داورزن",
            "فرهادگرد",
            "کاخک",
            "مشهدریزه",
            "جغتای",
            "مزدآوند",
            "قوچان",
            "یونسی",
            "سنگان",
            "نوخندان",
            "کندر",
            "نیشابور",
            "احمدابادصولت",
            "شهراباد",
            "رضویه",
            "تربت حیدریه",
            "باخرز",
            "سفیدسنگ",
            "بیدخت",
            "تایباد",
            "فیروزه",
            "قاسم آباد",
            "سبزوار",
            "فیض آباد",
            "گلمکان",
            "لطف آباد",
            "شهرزو",
            "خرو",
            "تربت جام",
            "انابد",
            "ملک آباد",
            "بایک",
            "دولت آباد",
            "سرخس",
            "ریوش",
            "طرقبه",
            "خواف",
            "روداب",
            "خلیل آباد"
        ]
    },
    {
        "id": 12,
        "name": "خراسان شمالی",
        "tel_prefix": "058",
        "cities": [
            "چناران شهر",
            "راز",
            "پیش قلعه",
            "قوشخانه",
            "شوقان",
            "اسفراین",
            "گرمه",
            "قاضی",
            "شیروان",
            "حصارگرمخان",
            "آشخانه",
            "تیتکانلو",
            "جاجرم",
            "بجنورد",
            "درق",
            "آوا",
            "زیارت",
            "سنخواست",
            "صفی آباد",
            "ایور",
            "فاروج",
            "لوجلی"
        ]
    },
    {
        "id": 13,
        "name": "خوزستان",
        "tel_prefix": "061",
        "cities": [
            "هفتگل",
            "بیدروبه",
            "شاوور",
            "حمزه",
            "گتوند",
            "شرافت",
            "منصوریه",
            "زهره",
            "رامهرمز",
            "بندرامام خمینی",
            "کوت عبداله",
            "میداود",
            "چغامیش",
            "ملاثانی",
            "چم گلک",
            "حر",
            "شمس آباد",
            "آبژدان",
            "چویبده",
            "مسجدسلیمان",
            "مقاومت",
            "ترکالکی",
            "دارخوین",
            "سردشت",
            "لالی",
            "کوت سیدنعیم",
            "حمیدیه",
            "دهدز",
            "قلعه تل",
            "میانرود",
            "رفیع",
            "اندیمشک",
            "الوان",
            "سالند",
            "صالح شهر",
            "اروندکنار",
            "سرداران",
            "تشان",
            "رامشیر",
            "شادگان",
            "بندرماهشهر",
            "جایزان",
            "بستان",
            "ویس",
            "اهواز",
            "فتح المبین",
            "شهر امام",
            "قلعه خواجه",
            "حسینیه",
            "گلگیر",
            "مینوشهر",
            "سماله",
            "شوشتر",
            "بهبهان",
            "هندیجان",
            "ابوحمیظه",
            "آغاجاری",
            "ایذه",
            "صیدون",
            "سیاه منصور",
            "هویزه",
            "آزادی",
            "شوش",
            "دزفول",
            "جنت مکان",
            "آبادان",
            "گوریه",
            "خرمشهر",
            "مشراگه",
            "خنافره",
            "چمران",
            "امیدیه",
            "سوسنگرد",
            "شیبان",
            "الهایی",
            "باغ ملک",
            "صفی آباد"
        ]
    },
    {
        "id": 14,
        "name": "زنجان",
        "tel_prefix": "024",
        "cities": [
            "سجاس",
            "زرین رود",
            "آب بر",
            "ارمغانخانه",
            "کرسف",
            "هیدج",
            "سلطانیه",
            "خرمدره",
            "نیک پی",
            "قیدار",
            "ابهر",
            "دندی",
            "حلب",
            "نوربهار",
            "گرماب",
            "چورزق",
            "زنجان",
            "سهرورد",
            "صایین قلعه",
            "ماه نشان",
            "زرین آباد"
        ]
    },
    {
        "id": 15,
        "name": "سمنان",
        "tel_prefix": "023",
        "cities": [
            "ایوانکی",
            "مجن",
            "دامغان",
            "سرخه",
            "مهدی شهر",
            "شاهرود",
            "سمنان",
            "کهن آباد",
            "گرمسار",
            "کلاته خیج",
            "دیباج",
            "درجزین",
            "رودیان",
            "بسطام",
            "امیریه",
            "میامی",
            "شهمیرزاد",
            "بیارجمند",
            "کلاته",
            "آرادان"
        ]
    },
    {
        "id": 16,
        "name": "سیستان و بلوچستان",
        "tel_prefix": "054",
        "cities": [
            "محمدی",
            "شهرک علی اکبر",
            "بنجار",
            "گلمورتی",
            "نگور",
            "راسک",
            "بنت",
            "قصرقند",
            "جالق",
            "هیدوچ",
            "نوک آباد",
            "زهک",
            "بمپور",
            "پیشین",
            "گشت",
            "محمدآباد",
            "زاهدان",
            "زابلی",
            "چاه بهار",
            "زرآباد",
            "بزمان",
            "اسپکه",
            "فنوج",
            "سراوان",
            "ادیمی",
            "زابل",
            "دوست محمد",
            "ایرانشهر",
            "سرباز",
            "سیرکان",
            "میرجاوه",
            "نصرت آباد",
            "سوران",
            "خاش",
            "کنارک",
            "محمدان",
            "نیک شهر"
        ]
    },
    {
        "id": 17,
        "name": "فارس",
        "tel_prefix": "071",
        "cities": [
            "کازرون",
            "کارزین (فتح آباد)",
            "فدامی",
            "خومه زار",
            "سلطان شهر",
            "فیروزآباد",
            "دبیران",
            "باب انار",
            "رامجرد",
            "سروستان",
            "قره بلاغ",
            "ارسنجان",
            "دژکرد",
            "بیرم",
            "دهرم",
            "شیراز",
            "ایزدخواست",
            "علامرودشت",
            "اوز",
            "وراوی",
            "بیضا",
            "نی ریز",
            "کنارتخته",
            "امام شهر",
            "جهرم",
            "بابامنیر",
            "گراش",
            "فسا",
            "شهرپیر",
            "حسن اباد",
            "کامفیروز",
            "خنج",
            "خانه زنیان",
            "استهبان",
            "بوانات",
            "لطیفی",
            "فراشبند",
            "زرقان",
            "صغاد",
            "اشکنان",
            "قایمیه",
            "گله دار",
            "دوبرجی",
            "آباده طشک",
            "خرامه",
            "میمند",
            "افزر",
            "دوزه",
            "سیدان",
            "کوپن",
            "زاهدشهر",
            "قادراباد",
            "سده",
            "بنارویه",
            "سعادت شهر",
            "شهرصدرا",
            "سورمق",
            "حسامی",
            "جویم",
            "خوزی",
            "اردکان",
            "قطرویه",
            "نودان",
            "مبارک آباددیز",
            "داراب",
            "نورآباد",
            "کوار",
            "نوبندگان",
            "حاجی آباد",
            "خاوران",
            "مرودشت",
            "کوهنجان",
            "ششده",
            "مزایجان",
            "ایج",
            "خور",
            "نوجین",
            "لپویی",
            "بهمن",
            "اهل",
            "خشت",
            "مهر",
            "جنت شهر",
            "مشکان",
            "بالاده",
            "قیر",
            "قطب آباد",
            "خانیمن",
            "مصیری",
            "میانشهر",
            "صفاشهر",
            "اقلید",
            "عمادده",
            "مادرسلیمان",
            "داریان",
            "رونیز",
            "کره ای",
            "لار",
            "اسیر",
            "هماشهر",
            "آباده",
            "لامرد"
        ]
    },
    {
        "id": 18,
        "name": "قزوین",
        "tel_prefix": "028",
        "cities": [
            "سگزآباد",
            "بیدستان",
            "کوهین",
            "رازمیان",
            "خرمدشت",
            "آبگرم",
            "شال",
            "شریفیه",
            "اقبالیه",
            "نرجه",
            "ارداق",
            "الوند",
            "خاکعلی",
            "سیردان",
            "ضیاڈآباد",
            "بویین زهرا",
            "محمدیه",
            "محمودآبادنمونه",
            "معلم کلایه",
            "اسفرورین",
            "آوج",
            "دانسفهان",
            "آبیک",
            "قزوین",
            "تاکستان"
        ]
    },
    {
        "id": 19,
        "name": "قم",
        "tel_prefix": "025",
        "cities": [
            "کهک",
            "قم",
            "سلفچگان",
            "جعفریه",
            "قنوات",
            "دستجرد"
        ]
    },
    {
        "id": 20,
        "name": "کردستان",
        "tel_prefix": "087",
        "cities": [
            "قروه",
            "توپ آغاج",
            "سروآباد",
            "بویین سفلی",
            "زرینه",
            "دلبران",
            "سنندج",
            "یاسوکند",
            "موچش",
            "بانه",
            "مریوان",
            "سریش آباد",
            "صاحب",
            "دهگلان",
            "بابارشانی",
            "دیواندره",
            "برده رشه",
            "شویشه",
            "بیجار",
            "اورامان تخت",
            "کانی سور",
            "کانی دینار",
            "دزج",
            "سقز",
            "بلبان آباد",
            "پیرتاج",
            "کامیاران",
            "آرمرده",
            "چناره"
        ]
    },
    {
        "id": 21,
        "name": "کرمان",
        "tel_prefix": "034",
        "cities": [
            "کهنوج",
            "بلوک",
            "پاریز",
            "گنبکی",
            "زنگی آباد",
            "بم",
            "خانوک",
            "کیانشهر",
            "جوپار",
            "عنبرآباد",
            "جوزم",
            "نظام شهر",
            "لاله زار",
            "کشکوییه",
            "زیدآباد",
            "هنزا",
            "چترود",
            "جبالبارز",
            "سیرجان",
            "رودبار",
            "کرمان",
            "بافت",
            "صفاییه",
            "منوجان",
            "اندوهجرد",
            "هجدک",
            "خورسند",
            "امین شهر",
            "بردسیر",
            "رفسنجان",
            "هماشهر",
            "محمدآباد",
            "اختیارآباد",
            "بروات",
            "ریحان",
            "کوهبنان",
            "ماهان",
            "دوساری",
            "دهج",
            "فاریاب",
            "گلزار",
            "بهرمان",
            "بلورد",
            "فهرج",
            "کاظم آباد",
            "جیرفت",
            "نجف شهر",
            "قلعه گنج",
            "باغین",
            "بزنجان",
            "زرند",
            "نودژ",
            "گلباف",
            "راور",
            "خاتون اباد",
            "نرماشیر",
            "دشتکار",
            "مس سرچشمه",
            "خواجو شهر",
            "رابر",
            "راین",
            "درب بهشت",
            "یزدان شهر",
            "زهکلوت",
            "محی آباد",
            "مردهک",
            "شهداد",
            "ارزوییه",
            "نگار",
            "شهربابک",
            "انار"
        ]
    },
    {
        "id": 22,
        "name": "کرمانشاه",
        "tel_prefix": "083",
        "cities": [
            "سنقر",
            "شاهو",
            "بانوره",
            "تازه آباد",
            "هلشی",
            "جوانرود",
            "قصرشیرین",
            "نوسود",
            "کرند",
            "کوزران",
            "بیستون",
            "حمیل",
            "گیلانغرب",
            "سطر",
            "روانسر",
            "پاوه",
            "ازگله",
            "کرمانشاه",
            "میان راهان",
            "کنگاور",
            "سرپل ذهاب",
            "ریجاب",
            "باینگان",
            "هرسین",
            "اسلام آبادغرب",
            "سرمست",
            "سومار",
            "نودشه",
            "گهواره",
            "رباط",
            "صحنه",
            "گودین"
        ]
    },
    {
        "id": 23,
        "name": "کهگیلویه و بویراحمد",
        "tel_prefix": "074",
        "cities": [
            "گراب سفلی",
            "لنده",
            "سی سخت",
            "دهدشت",
            "یاسوج",
            "سرفاریاب",
            "دوگنبدان",
            "چیتاب",
            "لیکک",
            "دیشموک",
            "مادوان",
            "باشت",
            "پاتاوه",
            "قلعه رییسی",
            "مارگون",
            "چرام",
            "سوق"
        ]
    },
    {
        "id": 24,
        "name": "گلستان",
        "tel_prefix": "017",
        "cities": [
            "سیمین شهر",
            "مزرعه",
            "رامیان",
            "فراغی",
            "گنبدکاووس",
            "کردکوی",
            "مراوه",
            "بندرترکمن",
            "نگین شهر",
            "آق قلا",
            "سرخنکلاته",
            "گالیکش",
            "سنگدوین",
            "دلند",
            "بندرگز",
            "نوده خاندوز",
            "مینودشت",
            "گرگان",
            "گمیش تپه",
            "علی اباد",
            "خان ببین",
            "کلاله",
            "اینچه برون",
            "فاضل آباد",
            "تاتارعلیا",
            "نوکنده",
            "آزادشهر",
            "انبارآلوم",
            "جلین"
        ]
    },
    {
        "id": 25,
        "name": "گیلان",
        "tel_prefix": "013",
        "cities": [
            "منجیل",
            "شلمان",
            "خشکبیجار",
            "ماکلوان",
            "سنگر",
            "مرجقل",
            "لیسار",
            "رضوانشهر",
            "رحیم آباد",
            "لوندویل",
            "احمدسرگوراب",
            "لوشان",
            "اطاقور",
            "لشت نشاء",
            "فومن",
            "چوبر",
            "بازار جمعه",
            "کلاچای",
            "بندرانزلی",
            "املش",
            "رستم آباد",
            "لاهیجان",
            "توتکابن",
            "لنگرود",
            "کوچصفهان",
            "صومعه سرا",
            "اسالم",
            "دیلمان",
            "رودسر",
            "کیاشهر",
            "شفت",
            "رودبار",
            "کومله",
            "رشت",
            "ماسوله",
            "خمام",
            "ماسال",
            "واجارگاه",
            "هشتپر (تالش)",
            "پره سر",
            "بره سر",
            "آستارا",
            "رودبنه",
            "جیرنده",
            "چاف و چمخاله",
            "لولمان",
            "گوراب زرمیخ",
            "حویق",
            "سیاهکل",
            "چابکسر",
            "آستانه اشرفیه",
            "رانکوه"
        ]
    },
    {
        "id": 26,
        "name": "لرستان",
        "tel_prefix": "066",
        "cities": [
            "چالانچولان",
            "بیران شهر",
            "ویسیان",
            "شول آباد",
            "پلدختر",
            "کوهدشت",
            "هفت چشمه",
            "بروجرد",
            "الشتر",
            "مومن آباد",
            "دورود",
            "زاغه",
            "چقابل",
            "الیگودرز",
            "معمولان",
            "کوهنانی",
            "نورآباد",
            "سپیددشت",
            "سراب دوره",
            "ازنا",
            "گراب",
            "خرم آباد",
            "اشترینان",
            "فیروزآباد",
            "درب گنبد"
        ]
    },
    {
        "id": 27,
        "name": "مازندران",
        "tel_prefix": "011",
        "cities": [
            "گلوگاه",
            "گلوگاه",
            "پل سفید",
            "دابودشت",
            "چالوس",
            "کیاسر",
            "بهنمیر",
            "تنکابن",
            "کلاردشت",
            "ایزدشهر",
            "گتاب",
            "سلمان شهر",
            "ارطه",
            "امیرکلا",
            "کوهی خیل",
            "پایین هولار",
            "گزنک",
            "محمودآباد",
            "رامسر",
            "نوشهر",
            "خلیل شهر",
            "کیاکلا",
            "نور",
            "مرزیکلا",
            "فریدونکنار",
            "زیرآب",
            "امامزاده عبدالله",
            "هچیرود",
            "فریم",
            "هادی شهر",
            "نشتارود",
            "پول",
            "بهشهر",
            "کلارآباد",
            "بلده",
            "بابل",
            "جویبار",
            "آلاشت",
            "آمل",
            "نکا",
            "کتالم وسادات شهر",
            "بابلسر",
            "شیرود",
            "شیرگاه",
            "رویان",
            "زرگرمحله",
            "عباس اباد",
            "قایم شهر",
            "خوش رودپی",
            "مرزن آباد",
            "ساری",
            "رینه",
            "سرخرود",
            "خرم آباد",
            "کجور",
            "رستمکلا",
            "سورک",
            "چمستان"
        ]
    },
    {
        "id": 28,
        "name": "مرکزی",
        "tel_prefix": "086",
        "cities": [
            "آستانه",
            "خنجین",
            "نراق",
            "کمیجان",
            "آشتیان",
            "رازقان",
            "مهاجران",
            "غرق آباد",
            "خنداب",
            "قورچی باشی",
            "خشکرود",
            "ساروق",
            "محلات",
            "شازند",
            "ساوه",
            "میلاجرد",
            "تفرش",
            "زاویه",
            "اراک",
            "توره",
            "نوبران",
            "فرمهین",
            "دلیجان",
            "پرندک",
            "کارچان",
            "نیمور",
            "هندودر",
            "آوه",
            "جاورسیان",
            "خمین",
            "مامونیه",
            "داودآباد",
            "شهباز"
        ]
    },
    {
        "id": 29,
        "name": "هرمزگان",
        "tel_prefix": "076",
        "cities": [
            "بیکاء",
            "تیرور",
            "گروک",
            "قشم",
            "کوشکنار",
            "کیش",
            "سرگز",
            "بندرعباس",
            "زیارتعلی",
            "سندرک",
            "کوهستک",
            "لمزان",
            "رویدر",
            "قلعه قاضی",
            "فارغان",
            "ابوموسی",
            "هشتبندی",
            "سردشت",
            "درگهان",
            "پارسیان",
            "کنگ",
            "جناح",
            "تازیان پایین",
            "دهبارز",
            "میناب",
            "سیریک",
            "سوزا",
            "خمیر",
            "چارک",
            "حاجی اباد",
            "فین",
            "بندرجاسک",
            "گوهران",
            "هرمز",
            "دشتی",
            "بندرلنگه",
            "بستک",
            "تخت"
        ]
    },
    {
        "id": 30,
        "name": "همدان",
        "tel_prefix": "081",
        "cities": [
            "زنگنه",
            "دمق",
            "سرکان",
            "آجین",
            "جورقان",
            "برزول",
            "فامنین",
            "سامن",
            "بهار",
            "فرسفج",
            "شیرین سو",
            "مریانج",
            "فیروزان",
            "قروه درجزین",
            "ازندریان",
            "لالجین",
            "گل تپه",
            "گیان",
            "ملایر",
            "صالح آباد",
            "تویسرکان",
            "اسدآباد",
            "همدان",
            "نهاوند",
            "رزن",
            "جوکار",
            "مهاجران",
            "کبودرآهنگ",
            "قهاوند"
        ]
    },
    {
        "id": 31,
        "name": "یزد",
        "tel_prefix": "035",
        "cities": [
            "مروست",
            "مهردشت",
            "حمیدیا",
            "تفت",
            "اشکذر",
            "ندوشن",
            "یزد",
            "عقدا",
            "بهاباد",
            "ابرکوه",
            "زارچ",
            "نیر",
            "اردکان",
            "هرات",
            "بفروییه",
            "شاهدیه",
            "بافق",
            "خضرآباد",
            "میبد",
            "مهریز",
            "احمدآباد"
        ]
    }
]

// دریافت المنت‌های HTML
document.addEventListener("DOMContentLoaded", function () {
    const provinceSelect = document.getElementById("provinceSelect");
    const citySelect = document.getElementById("citySelect");

    // مقداردهی اولیه به استان‌ها با استفاده از DocumentFragment
    const provinceFragment = document.createDocumentFragment();
    provinces.forEach(province => {
        const option = document.createElement("option");
        option.value = province.id;
        option.textContent = province.name;
        provinceFragment.appendChild(option);
    });
    provinceSelect.appendChild(provinceFragment);

    // مقداردهی Choices.js به `select` ها
    const provinceChoices = new Choices(provinceSelect, { searchEnabled: true });
    const cityChoices = new Choices(citySelect, { searchEnabled: true });

    // تابع برای آپدیت شهرهای مرتبط و انتخاب اولین شهر
    function updateCities() {
        const provinceId = parseInt(provinceSelect.value); // مقدار انتخاب‌شده را عددی می‌کنیم
        const selectedProvince = provinces.find(province => province.id === provinceId);

        // پاک کردن شهرهای قبلی از Choices.js
        cityChoices.clearChoices();

        if (selectedProvince) {
            const cityFragment = document.createDocumentFragment();
            const cityOptions = selectedProvince.cities.map(city => ({
                value: city,
                label: city
            }));

            // استفاده از Fragment برای بهینه‌سازی اضافه‌کردن گزینه‌ها
            cityOptions.forEach(({ value, label }) => {
                const option = document.createElement("option");
                option.value = value;
                option.textContent = label;
                cityFragment.appendChild(option);
            });

            citySelect.appendChild(cityFragment);
            cityChoices.setChoices(cityOptions, 'value', 'label', true);

            // انتخاب اولین شهر به‌صورت پیش‌فرض
            if (cityOptions.length > 0) {
                cityChoices.setChoiceByValue(cityOptions[0].value);
            }
        }
    }

    // تنظیم مقدار پیش‌فرض برای استان و شهر هنگام لود صفحه
    provinceSelect.value = provinces[0].id;
    updateCities();

    // رویداد تغییر استان
    provinceSelect.addEventListener("change", updateCities);
});


/*========================================================================*/
/*========================================================================*/

function getCurrentTimeAndDate() {
    const now = new Date();

    // دریافت زمان دقیق به وقت ایران
    const iranTime = new Date(now.toLocaleString("en-US", { timeZone: "Asia/Tehran" }));

    // دریافت ساعت و دقیقه به وقت ایران
    const hours = iranTime.getHours().toString().padStart(2, '0');
    const minutes = iranTime.getMinutes().toString().padStart(2, '0');
    const time = `${hours}:${minutes}`;

    const date = moment().locale('fa').format('YYYY/M/D');

    return [time, date];
}

// تست تابع





const boxes = document.querySelector('.boxes')
let boxesWrapper = null
const btn = document.querySelector('.btn')
btn.addEventListener('click', function () {
    boxes.classList.add('bg-boxes')
    const cityName = citySelect.value;
    const apiKey = '5fe3aa65338bd0b501c728a8d16e81a8'; // API Key خود را وارد کنید
    const url = `https://api.openweathermap.org/data/2.5/forecast?q=${cityName}&appid=${apiKey}&units=metric&lang=fa`;
    boxes.innerHTML = `
        <div class="flex-center">
            <div class="loader"></div>
        </div>
    `
    fetch(url)
        .then(response => response.json())
        .then(data => {
            if (data.cod === "200") {
                // دریافت تاریخ شمسی با استفاده از کد داخلی
                const result = getCurrentTimeAndDate();
                console.log(result);
                boxes.innerHTML = ''
                boxes.insertAdjacentHTML('beforeend' , `
                    <div class="boxes_header">
                        <h6>وضعیت آب و هوا در شهر ${cityName}</h6>
                        <div>
                            <span class="boxes_header-time">${result[0]}</span>
                            <span class="boxes_header-date">${result[1]}</span>
                        </div>
                    </div>
                `)
                boxesWrapper = document.createElement('div')
                boxesWrapper.className = 'boxes_wrapper'
                boxes.appendChild(boxesWrapper)
                displayCurrentWeather(data);
                displayFutureForecast(data);
            } else {
                console.log("خطا در دریافت داده‌ها");
                boxes.innerHTML = `
                    <div class="flex-center text-color-error">
                        <span>متاسفانه برای شهر</span>
                        <span>${cityName}</span>
                        <span>هیچ اطلاعاتی در سایت</span>
                        <a href="https://openweathermap.org/" class="link-color mx-5">openweather</a>
                        <span>ثبت نشده است:(</span>
                    </div>
                `
            }
        })
        .catch(error => {
            console.log('خطا در دریافت اطلاعات:', error)
            boxes.innerHTML = `
                <div class="flex-vertical">
                    <span class="text-color-error">خطا در دریافت اطلاعات :</span>
                    <span class="text-color-error">${error}</span>
                </div>
            `
        });
});

// تابع برای نمایش وضعیت آب و هوا در روز جاری
function displayCurrentWeather(data) {
    const current = data.list[0]; // اولین پیش‌بینی که همان وضعیت امروز است
    /*console.log(`وضعیت آب و هوا در ${data.city.name} (امروز):`);
    console.log(`دما: ${current.main.temp}°C`);
    console.log(`وضعیت: ${current.weather[0].description}`);
    console.log(`رطوبت: ${current.main.humidity}%`);
    console.log(`سرعت باد: ${((current.wind.speed) * 3.6).toFixed(1)} متر بر ثانیه`);
    console.log(`جهت باد: ${current.wind.deg}°`);
    console.log(`فشار هوا: ${current.main.pressure} hPa`);
    console.log(`دید افقی: ${current.visibility / 1000} کیلومتر`);
    console.log('----------------------------------------');*/
    boxesWrapper.insertAdjacentHTML('beforeend' , `
        <div class="box">
            <h6 class="box_title" style="text-align: center">وضعیت فعلی</h6>
            <div class="box_row">
                <span >دما:</span>
                <span class="en-text-properties">${current.main.temp}°C</span>
            </div>
            <div class="box_row">
                <span>وضعیت:</span>
                <span>${current.weather[0].description}</span>
            </div>
            <div class="box_row">
                <span>رطوبت:</span>
                <span class="en-text-properties">${current.main.humidity}%</span>
            </div>
            <div class="box_row">
                <span>سرعت باد:</span>
                <span class="en-text-properties">${((current.wind.speed) * 3.6).toFixed(1)}</span>
                <span>کیلومتر بر ساعت</span>
            </div>
        </div>
    `)
}

// تابع برای نمایش پیش‌بینی وضعیت آب و هوا برای روزهای آینده
function displayFutureForecast(data) {
    const totalDays = 4; // تعداد روزهایی که می‌خواهیم پیش‌بینی را نمایش دهیم
    const availableDays = Math.min(totalDays, Math.floor(data.list.length / 8)); // بررسی تعداد روزهایی که در دسترس داریم

    for (let i = 1; i <= availableDays; i++) {
        const forecast = getDailyForecast(data, i);
        if (forecast) { // بررسی اینکه آیا داده‌ها موجود هستند
            console.log(`پیش‌بینی برای${i}روز آینده :`);
            console.log(`دما: ${forecast.temp}°C`);
            console.log(`وضعیت: ${forecast.weatherDescription}`);
            console.log(`رطوبت: ${forecast.humidity}%`);
            console.log(`سرعت باد: ${((forecast.windSpeed) * 3.6).toFixed(1)} متر بر ثانیه`);
            console.log('----------------------------------------');
            boxesWrapper.insertAdjacentHTML('beforeend' , `
                <div class="box">
                    <h6 class="box_title" style="text-align: center">
                        <span>پیش بینی برای </span>
                        <span>${i}</span>
                        <span>روز آینده</span>
                    </h6>
                    <div class="box_row">
                        <span >دما:</span>
                        <span class="en-text-properties">${forecast.temp}°C</span>
                    </div>
                    <div class="box_row">
                        <span>وضعیت:</span>
                        <span>وضعیت: ${forecast.weatherDescription}</span>
                    </div>
                    <div class="box_row">
                        <span>رطوبت:</span>
                        <span class="en-text-properties">${forecast.humidity}%</span>
                    </div>
                    <div class="box_row">
                        <span>سرعت باد:</span>
                        <span class="en-text-properties">${((forecast.windSpeed) * 3.6).toFixed(1)}</span>
                        <span>کیلومتر بر ساعت</span>
                    </div>
                </div>
            `)
        } else {
            console.log(`داده‌ای برای روز ${i} موجود نیست`);
        }
    }
}

// تابع برای گرفتن پیش‌بینی روزانه از لیست داده‌ها
function getDailyForecast(data, dayIndex) {
    const dayData = data.list[dayIndex * 8]; // هر روز 8 پیش‌بینی دارد (یک پیش‌بینی برای هر 3 ساعت)
    // بررسی اینکه آیا داده‌ها موجود هستند
    if (dayData) {
        return {
            temp: dayData.main.temp,
            weatherDescription: dayData.weather[0].description,
            humidity: dayData.main.humidity,
            windSpeed: dayData.wind.speed
        };
    }
    return null; // اگر داده‌ای برای روز موجود نباشد
}

console.log()





